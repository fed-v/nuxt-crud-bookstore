import{g as R,r as I,O as q,o as a,c as u,b as m,s as n,a as e,d as A,F as S,n as O,h as F,w as y,v as T,q as G,P as L,Q as le,R as ie,A as X,B as W,S as Q,T as H,M as J,k as ee,m as k,U as re,V as ce,W as te,t as P,X as ne,Y as ue,L as M,Z as de,a0 as Y,a1 as pe,a2 as me,a3 as fe,N as ve,a4 as he,a5 as _e,a6 as ge}from"./entry.74a1b1ba.js";import{_ as xe}from"./Navbar.vue.7ff60442.js";import{_ as be}from"./NSectionBlock.d7e62056.js";import{_ as we}from"./FilepathItem.vue.2c8f962b.js";import{_ as ye}from"./CodeSnippets.vue.c208c49e.js";import{_ as $e}from"./DrawerRight.vue.3eebe7ce.js";import{D as ke}from"./constants.4e5eba24.js";import"./NIconTitle.vue.d1cbff70.js";import"./NCodeBlock.vue.5349dcfa.js";import"./client.c408b851.js";const Ce={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},Pe={for:"drop-zone-input","text-3xl":""},Ae={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},De=e("div",{px6:"",py6:""},[e("h1",{"text-2xl":""}," Upload "),e("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1),Ve={grid:"~ cols-minmax-8rem","overflow-auto":"",p6:""},Ne={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Fe=["src"],Ie={flex:"~ gap1","items-center":""},Se={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},Te=R({__name:"DropZone",props:{folder:{type:String,required:!0}},setup(D){const l=D,r=I(!1),o=I(),d=I([]),f=["image","video"];function z(s){o.value=s.target,r.value=!0}function v(s){s.target===o.value&&(r.value=!1)}function C(s){s.preventDefault()}function U(s){s.preventDefault(),j(s.dataTransfer.files)}function j(s){const c=Array.from(s||[]);if(c.length){const w=[],i=d.value.map(t=>t.name);for(const t of c)if(i.includes(t.name)){let p=1;const[_,E]=t.name.split(".");for(;i.includes(`${_} (${p}).${E}`);)p++;const $=`${_}-${p}.${E}`,K=new Blob([t],{type:t.type}),Z=new File([K],$,{lastModified:Date.now()});w.push(Z),i.push($)}else t.type===""?L({message:"Folders are not supported yet",icon:"carbon:face-dissatisfied",classes:"text-orange"}):f.some(p=>t.type.includes(p))?w.push(t):L({message:`"${t.type}" file type is not allowed`,icon:"carbon:face-dissatisfied",classes:"text-orange"});d.value=[...d.value,...w]}}async function g(){if(le.value||ie.value)return;const s=[];for(const c of d.value){const w=new FileReader;w.readAsDataURL(c);const t=(await new Promise(p=>{w.onload=()=>p(w.result)})).split(";base64,").pop();s.push({name:c.name,data:t})}await X.writeStaticAssets(await W(),[...s],l.folder).then(()=>{V(),L({message:"Files uploaded successfully!",icon:"i-carbon:checkmark"})}).catch(c=>{console.error(c),V(),L({message:`Error uploading files: ${c}`,icon:"i-carbon-warning",classes:"text-red"})}),r.value=!1}function h(s){d.value?.splice(s,1)}function x(s){return URL.createObjectURL(s)}function B(s,c){const[w,i]=s.name.split("."),t=c.replace(/\.\w+$/,""),p=`${t}.${i}`;return t.length===0?(alert("File name must be at least 1 characters long"),w):(Object.defineProperty(s,"name",{value:p,writable:!1}),d.value.splice(d.value.indexOf(s),1,s),s)}function b(){d.value=[]}function V(){r.value=!1,b()}return q("dragenter",z),q("dragleave",v),q("dragover",C),q("drop",U),(s,c)=>{const w=Q,i=H,t=J,p=ee;return a(),u("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:G(n(r)?"opacity-100 visible":"opacity-0 invisible")},[m(w,{icon:"carbon-close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",onClick:V}),n(d)?.length?(a(),u("div",Ae,[De,e("div",Ve,[(a(!0),u(S,null,O(n(d),(_,E)=>(a(),u("div",{key:_.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[e("div",Ne,[e("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:x(_)},null,8,Fe)]),e("div",Ie,[m(t,{n:"xs","flex-auto":"","model-value":_.name,"onUpdate:modelValue":$=>B(_,$.target.value)},null,8,["model-value","onUpdate:modelValue"]),m(w,{icon:"carbon-delete","flex-none":"",title:"Remove file",onClick:$=>h(E)},null,8,["onClick"])])]))),128))]),e("div",Se,[n(d).length?(a(),F(p,{key:0,n:"red",onClick:b},{default:y(()=>[m(i,{icon:"carbon-clean"}),A(" Clear ")]),_:1})):T("",!0),m(p,{disabled:!n(d).length,n:"primary solid",onClick:g},{default:y(()=>[m(i,{icon:"carbon-cloud-upload"}),A(" Upload ")]),_:1},8,["disabled"])])])):(a(),u("div",Ce,[e("label",Pe,[m(i,{icon:"carbon-cloud-upload","mr-2":""}),A(" Drop files here or click to select ")]),e("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:c[0]||(c[0]=_=>j(_.target.files))},null,32)]))],2)}}}),je=R({__name:"AssetFontPreview",props:{asset:{}},setup(D){const l=D,r=k(()=>`devtools-assets-${re(l.asset)}`);return ce(k(()=>`
  @font-face {
    font-family: '${r.value}';
    src: url('${l.asset.publicPath}');
  }
`)),(o,d)=>(a(),u("div",{"of-hidden":"",style:te({fontFamily:`'${n(r)}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),Be={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},Ee=["src"],Le={key:2,"i-carbon-document":"","text-3xl":"",op20:""},Ue={key:3,"w-full":"","self-start":"",p4:""},ze=["textContent"],Me={key:4},Re=["src","autoplay","controls"],Oe={key:5,"i-carbon-help":"","text-3xl":"",op20:""},oe=R({__name:"AssetPreview",props:{asset:{},textContent:{},detail:{type:Boolean}},setup(D){return(l,r)=>{const o=je;return a(),u("div",Be,[l.asset.type==="image"?(a(),u("img",{key:0,src:l.asset.publicPath},null,8,Ee)):l.asset.type==="font"?(a(),F(o,{key:l.asset.publicPath,asset:l.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):l.asset.type==="text"&&!l.textContent?(a(),u("div",Le)):l.asset.type==="text"&&l.textContent?(a(),u("div",Ue,[e("pre",{"max-h-10rem":"","of-hidden":"","text-xs":"","font-mono":"",textContent:P(l.textContent)},null,8,ze)])):l.asset.type==="video"?(a(),u("div",Me,[e("video",{src:l.asset.publicPath,autoplay:l.detail,controls:l.detail},null,8,Re)])):(a(),u("div",Oe))])}}}),Xe={flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},Ze={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},qe=R({__name:"AssetGridItem",props:{asset:{},folder:{}},setup(D){const l=D,r=k(()=>l.folder&&l.asset.path.startsWith(l.folder)?l.asset.path.slice(l.folder.length):l.asset.path);return(o,d)=>{const f=oe;return a(),u("button",Xe,[m(f,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:o.asset},null,8,["asset"]),e("div",Ze,P(n(r)),1)])}}}),Ge=e("div",{"x-divider":""},null,-1),se=R({__name:"AssetListItem",props:{item:{},index:{default:0},modelValue:{}},setup(D,{emit:l}){const r=D,o=ne(r,"modelValue",l,{passive:!0}),d=k(()=>r.item?.children?.length),f=I(!0),z=k(()=>d.value?"i-carbon-folder":r.item.type==="image"?"i-carbon-image":r.item.type==="video"?"i-carbon-video":r.item.type==="audio"?"i-carbon-volume-up":r.item.type==="font"?"i-carbon-text-small-caps":r.item.type==="text"?"i-carbon-document":r.item.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(v,C)=>{const U=H,j=se;return a(),u("div",null,[e("button",{flex:"~ gap-2","w-full":"","items-center":"",hover:"bg-active",px4:"",py1:"",style:te({paddingLeft:`calc(1rem + ${v.index*1.5}em)`}),class:G({"bg-active":!n(d)&&n(o)?.filePath===v.item?.filePath}),onClick:C[0]||(C[0]=g=>n(d)?f.value=!n(f):o.value=v.item)},[e("div",{class:G(n(z))},null,2),e("span",{class:G({"flex items-center":n(d)}),"flex-auto":"","text-start":"","text-sm":"","font-mono":""},P(v.item.path),3),n(d)?(a(),F(U,{key:0,icon:"carbon:chevron-right","transform-rotate":n(f)?90:0,transition:""},null,8,["transform-rotate"])):T("",!0)],6),Ge,n(f)?ue(v.$slots,"default",{key:0},()=>[(a(!0),u(S,null,O(v.item?.children,g=>(a(),F(j,{key:g.filepath,modelValue:n(o),"onUpdate:modelValue":C[1]||(C[1]=h=>M(o)?o.value=h:null),item:g,index:v.index+1},null,8,["modelValue","item","index"]))),128))]):T("",!0)])}}}),Ke={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},We=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Preview "),e("div",{"x-divider":""})],-1),Qe={flex:"~","items-center":"","justify-center":""},Ye=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Details "),e("div",{"x-divider":""})],-1),He={"max-w-full":"","w-full":"","table-fixed":""},Je=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1),et={flex:"~ gap-1","w-full":"","items-center":""},tt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1),nt={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},ot={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},st=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1),at={capitalize:""},lt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1),it={key:0},rt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1),ct=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1),ut=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1),dt={op70:""},pt=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Actions "),e("div",{"x-divider":""})],-1),mt={flex:"~ gap2 wrap"},ft=e("div",{"flex-auto":""},null,-1),vt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},ht=e("span",null," Are you sure you want to delete this asset? ",-1),_t={flex:"~ gap2 wrap justify-center"},gt={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p8:""},xt={flex:"~ gap2 wrap justify-center"},bt=R({__name:"AssetDetails",props:{modelValue:{}},setup(D,{emit:l}){const o=ne(D,"modelValue",l,{passive:!0}),d=de(),f=Y(()=>{if(o.value.type==="image")return X.getImageMeta(o.value.filePath)}),z=Y(()=>{if(o.value.type==="text")return X.getTextAssetContent(o.value.filePath)}),v=pe(),C=k(()=>(v.value?._installedModules||[]).some(t=>t.meta?.name==="@nuxt/image"||t.meta?.name==="@nuxt/image-edge")),U=k(()=>{const i=[];if(o.value.type==="image"){const t=f.value?.width?`
  width="${f.value.width}"
  height="${f.value.height}" `:" ";return i.push({lang:"vue-html",code:`<img${t}
  src="${o.value.publicPath}"
/>`,name:"Plain Image"}),C.value&&i.push({lang:"vue-html",code:`<NuxtImage${t}
  src="${o.value.publicPath}"
/>`,name:"Nuxt Image",docs:"https://image.nuxtjs.org/components/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${t}
  src="${o.value.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxtjs.org/components/nuxt-picture"}),i}return i.push({lang:"html",code:`<a download href="${o.value.publicPath}">
  Download ${o.value.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),i}),j=me(),g=fe(()=>o.value.mtime),h=k(()=>{const i=o.value.size;return i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(2)} KB`:`${(i/1024/1024).toFixed(2)} MB`}),x=k(()=>{if(!f.value?.width||!f.value?.height)return"";const i=(p,_)=>_?i(_,p%_):p,t=i(f.value.width,f.value.height);return t>3?`${f.value.width/t}:${f.value.height/t}`:""}),B=k(()=>["image","text","video","font"].includes(o.value.type)),b=I(!1);async function V(){try{await X.deleteStaticAsset(await W(),o.value.filePath),o.value=void 0,b.value=!1,L({message:"Asset deleted",icon:"i-carbon-checkmark",classes:"text-green"})}catch{L({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}const s=I(!1),c=I("");async function w(){const i=o.value.filePath.split("/"),t=i.slice(-1)[0].split(".").slice(0,-1).join(".");if(!c.value||c.value===t)return L({message:"Please enter a new name",icon:"i-carbon-warning",classes:"text-orange"});try{const p=i.slice(-1)[0].split(".").slice(-1)[0],_=`${i.slice(0,-1).join("/")}/${c.value}.${p}`;await X.renameStaticAsset(await W(),o.value.filePath,_),o.value=void 0,s.value=!1,L({message:"Asset renamed",icon:"i-carbon-checkmark",classes:"text-green"})}catch{L({message:"Something went wrong!",icon:"i-carbon-warning",classes:"text-red"})}}return(i,t)=>{const p=oe,_=we,E=Q,$=ee,K=ye,Z=ve,ae=J;return a(),u(S,null,[e("div",Ke,[n(B)?(a(),u(S,{key:0},[We,e("div",Qe,[m(p,{detail:"","max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:n(o),"text-content":n(z)},null,8,["asset","text-content"])])],64)):T("",!0),Ye,e("table",He,[e("tbody",null,[e("tr",null,[Je,e("td",null,[e("div",et,[m(_,{filepath:n(o).filePath,"text-left":""},null,8,["filepath"]),m(E,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",onClick:t[0]||(t[0]=N=>n(d)(n(o).filePath))})])])]),e("tr",null,[tt,e("td",null,[e("div",nt,[e("div",ot,P(n(o).publicPath),1),m(E,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",onClick:t[1]||(t[1]=N=>n(j)(n(o).publicPath))}),m(E,{"flex-none":"",to:n(o).publicPath,icon:"carbon-launch",target:"_blank",title:"Open in browser"},null,8,["to"])])])]),e("tr",null,[st,e("td",at,P(n(o).type),1)]),n(f)?.width?(a(),u(S,{key:0},[e("tr",null,[lt,e("td",null,P(n(f).width)+" x "+P(n(f).height),1)]),n(x)?(a(),u("tr",it,[rt,e("td",null,P(n(x)),1)])):T("",!0)],64)):T("",!0),e("tr",null,[ct,e("td",null,P(n(h)),1)]),e("tr",null,[ut,e("td",null,[A(P(new Date(n(o).mtime).toLocaleString())+" ",1),e("span",dt,"("+P(n(g))+")",1)])])])]),pt,e("div",mt,[m($,{to:n(o).publicPath,download:"",target:"_blank",icon:"carbon-download",n:"green"},{default:y(()=>[A(" Download ")]),_:1},8,["to"]),m($,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:t[2]||(t[2]=N=>s.value=!n(s))},{default:y(()=>[A(" Rename ")]),_:1}),m($,{icon:"carbon-delete",n:"red",onClick:t[3]||(t[3]=N=>b.value=!n(b))},{default:y(()=>[A(" Delete ")]),_:1}),n(o).type==="image"?(a(),F($,{key:0,disabled:"",icon:"carbon-image-service"},{default:y(()=>[A(" Optimize image (Coming soon) ")]),_:1})):T("",!0)]),ft,n(U).length?(a(),F(K,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":n(U)},null,8,["code-snippets"])):T("",!0)]),m(Z,{modelValue:n(b),"onUpdate:modelValue":t[5]||(t[5]=N=>M(b)?b.value=N:null)},{default:y(()=>[e("div",vt,[ht,e("div",_t,[m($,{icon:"carbon-close",onClick:t[4]||(t[4]=N=>b.value=!1)},{default:y(()=>[A(" Cancel ")]),_:1}),m($,{icon:"carbon-delete",n:"red",onClick:V},{default:y(()=>[A(" Delete ")]),_:1})])])]),_:1},8,["modelValue"]),m(Z,{modelValue:n(s),"onUpdate:modelValue":t[8]||(t[8]=N=>M(s)?s.value=N:null)},{default:y(()=>[e("div",gt,[m(ae,{modelValue:n(c),"onUpdate:modelValue":t[6]||(t[6]=N=>M(c)?c.value=N:null),placeholder:"New name",n:"blue"},null,8,["modelValue"]),e("div",xt,[m($,{icon:"carbon-close",onClick:t[7]||(t[7]=N=>s.value=!1)},{default:y(()=>[A(" Cancel ")]),_:1}),m($,{icon:"carbon-text-annotation-toggle",n:"blue",onClick:w},{default:y(()=>[A(" Rename ")]),_:1})])])]),_:1},8,["modelValue"])],64)}}}),wt={"h-full":"","of-auto":""},yt={"flex-none":"",flex:"~ gap2 items-center"},$t={op50:""},kt={key:0},Ct={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},Pt={key:1,p2:"",grid:"~ cols-minmax-8rem"},At={key:1},Lt=R({__name:"assets",setup(D){const l=he(),r=I(""),o=k(()=>new _e(l.value||[],{keys:["path"]})),d=k(()=>r.value?o.value.search(r.value).map(h=>h.item):l.value||[]),f=k(()=>{const g={};for(const h of d.value){const x=`${h.path.split("/").slice(0,-1).join("/")}/`;g[x]||(g[x]=[]),g[x].push(h)}return Object.entries(g).sort(([h],[x])=>h.localeCompare(x))}),z=k(()=>{const g={path:"public",children:[]},h=(x,B,b)=>{const[V,...s]=B;let c=x.children.find(w=>w.path===V);c||(c={...b,path:V,children:[]},x.children.push(c)),s.length>1?h(c,s,b):s.length===1&&c.children.push({...b,path:s[0]})};return d.value.forEach(x=>{const B=x.path.split("/").filter(b=>b!=="");h(g,B,x)}),g.children}),v=I(),C=I("grid");function U(){C.value=C.value==="list"?"grid":"list"}ge("Escape",()=>{v.value=void 0});const j=I();return(g,h)=>{const x=Q,B=xe,b=Te,V=qe,s=be,c=se,w=bt,i=$e;return a(),u("div",wt,[m(B,{ref_key:"navbar",ref:j,search:n(r),"onUpdate:search":h[0]||(h[0]=t=>M(r)?r.value=t:null),pb2:""},{actions:y(()=>[e("div",yt,[m(x,{"text-lg":"",icon:n(C)==="grid"?"i-carbon-list":"i-carbon-grid",title:"Toggle view",onClick:U},null,8,["icon"])])]),default:y(()=>[e("div",$t,[n(r)?(a(),u("span",kt,P(n(d).length)+" matched · ",1)):T("",!0),e("span",null,P(n(l)?.length)+" assets in total",1)])]),_:1},8,["search"]),m(b,{folder:"/"}),n(C)==="grid"?(a(),u(S,{key:0},[n(f).length>1?(a(!0),u(S,{key:0},O(n(f),([t,p])=>(a(),F(s,{key:t,text:t,description:`${p.length} items`,open:p.length<=("DETAILS_MAX_ITEMS"in g?g.DETAILS_MAX_ITEMS:n(ke)),padding:!1},{default:y(()=>[e("div",Ct,[(a(!0),u(S,null,O(p,_=>(a(),F(V,{key:_.path,asset:_,folder:t,onClick:E=>v.value=_},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(a(),u("div",Pt,[(a(!0),u(S,null,O(n(d),t=>(a(),F(V,{key:t.path,asset:t,onClick:p=>v.value=t},null,8,["asset","onClick"]))),128))]))],64)):(a(),u("div",At,[(a(!0),u(S,null,O(n(z),(t,p)=>(a(),F(c,{key:p,modelValue:n(v),"onUpdate:modelValue":h[1]||(h[1]=_=>M(v)?v.value=_:null),item:t},null,8,["modelValue","item"]))),128))])),m(i,{"model-value":!!n(v),"auto-close":"","w-120":"",navbar:n(j),onClose:h[3]||(h[3]=t=>v.value=void 0)},{default:y(()=>[n(v)?(a(),F(w,{key:0,modelValue:n(v),"onUpdate:modelValue":h[2]||(h[2]=t=>M(v)?v.value=t:null)},null,8,["modelValue"])):T("",!0)]),_:1},8,["model-value","navbar"])])}}});export{Lt as default};
